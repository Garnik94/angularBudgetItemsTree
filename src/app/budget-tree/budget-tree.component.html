<button (click)="shawAllDepartments()">Department</button>
<button (click)="shawAllGroups()">Group</button>
<button (click)="shawAllCategories()">Category</button>
<button (click)="shawAllSubCategories()">Sub-Category</button>

<br>

<ul style="list-style-type: none;">
  {{"JSON depth = " + getLevelsCount(budgetItemService.allBudgetItems$ | async).length}}
  <li
    *ngFor="let itemDepartmentId of budgetItemService.getDepartmentIdList(budgetItemService.allBudgetItems$ | async); let departmentIndex = index">
    <button (click)="isGroupPressed = !isGroupPressed">↓</button>

    {{itemDepartmentId | getName: "Department": (budgetItemService.allBudgetItems$ | async)}}

    <span>{{budgetItemService.calculateDepartmentBudget(2, budgetItemService.allBudgetItems$ | async)}}</span>

    <ul *ngIf="isGroupPressed" style="list-style-type: none;">
      <li
        *ngFor="let itemGroupId of budgetItemService.getGroupIdList(budgetItemService.allBudgetItems$ | async); let groupIndex = index">
        <button (click)="isCategoryPressed[groupIndex] = !isCategoryPressed[groupIndex]">↓</button>
        {{itemGroupId | getName: "Group": (budgetItemService.allBudgetItems$ | async)}}
        <span>{{budgetItemService.calculateGroupBudget(itemGroupId, budgetItemService.allBudgetItems$ | async)}}</span>
        <ul *ngIf="isCategoryPressed[groupIndex]" style="list-style-type: none;">
          <li
            *ngFor="let itemCategoryId of budgetItemService.getCategoryIdList(itemGroupId, budgetItemService.allBudgetItems$ | async); let categoryIndex = index">
            <button (click)="isSubCategoryPressed[groupIndex][categoryIndex] = !isSubCategoryPressed[groupIndex][categoryIndex]">↓</button>
            {{itemCategoryId | getName: "Category": (budgetItemService.allBudgetItems$ | async)}}
            <span>{{budgetItemService.calculateCategoryBudget(itemCategoryId, budgetItemService.allBudgetItems$ | async)}}</span>
            <ul *ngIf="isSubCategoryPressed[groupIndex][categoryIndex]" style="list-style-type: none;">
              <li
                *ngFor="let itemSubCategoryId of budgetItemService.getSubCategoryIdList(itemCategoryId, budgetItemService.allBudgetItems$ | async)">
                {{itemSubCategoryId | getName: "SubCategory": (budgetItemService.allBudgetItems$ | async)}}
                <span>{{budgetItemService.calculateSubCategoryBudget(itemSubCategoryId, budgetItemService.allBudgetItems$ | async)}}</span>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


